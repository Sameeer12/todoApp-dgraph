(this["webpackJsonpdgraph-todoapp"]=this["webpackJsonpdgraph-todoapp"]||[]).push([[0],{83:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var c,a,o,l,s,r,i,u=n(2),d=n.n(u),j=n(63),b=n.n(j),h=(n(75),n(15)),O=Object(h.a)(),p=n(8),m=n(22),f=n(13),k="all",x="active",g="completed",v=n(64),y=n(65),C=n(70),D=n(69),T=n(30),N=n.n(T),w=function(e,t){return 1===e?t:t+"s"},$=n(4),I=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){var e=this.props,t=e.completedCount,n=e.count,c=e.nowShowing,a=e.onClearCompleted,o=0===t?null:Object($.jsx)("button",{className:"clear-completed",onClick:a,children:"Clear completed"});return Object($.jsxs)("footer",{className:"footer",children:[Object($.jsxs)("span",{className:"todo-count",children:[Object($.jsx)("strong",{children:n})," ",w(n,"item")," left"]}),Object($.jsxs)("ul",{className:"filters",children:[Object($.jsx)("li",{children:Object($.jsx)("a",{href:"#/",className:N()({selected:c===k}),children:"All"})})," ",Object($.jsx)("li",{children:Object($.jsx)("a",{href:"#/active",className:N()({selected:c===x}),children:"Active"})})," ",Object($.jsx)("li",{children:Object($.jsx)("a",{href:"#/completed",className:N()({selected:c===g}),children:"Completed"})})]}),o]})}}]),n}(d.a.Component),q=function(e){var t=Object(u.useState)(e.todo.title),n=Object(f.a)(t,2),c=n[0],a=n[1],o=d.a.useRef(null);Object(u.useEffect)((function(){if(!o.current&&e.editing){var t=o.current;t.focus(),t.setSelectionRange(t.value.length,t.value.length)}}));var l=e.editing,s=e.onDestroy,r=e.onToggle,i=e.todo;return Object($.jsxs)("li",{className:N()({completed:i.completed,editing:l}),children:[Object($.jsxs)("div",{className:"view",children:[Object($.jsx)("input",{className:"toggle",type:"checkbox",checked:i.completed,onChange:r}),Object($.jsx)("label",{onDoubleClick:function(){var t=e.onEdit,n=e.todo;t(),a(n.title)},children:i.title}),Object($.jsx)("button",{className:"destroy",onClick:s})]}),Object($.jsx)("input",{ref:o,className:"edit",value:c,onChange:function(t){e.editing&&a(t.target.value)},onKeyDown:function(t){var n=e.onCancel,o=e.todo;27===t.which?(a(o.title),n(t)):13===t.which&&function(t){var n=e.onDestroy,o=e.onSave,l=c.trim();l?(o(l),a(l)):n()}()}})]})},S=n(27),E=n(14),M=Object(E.a)(c||(c=Object(S.a)(["\n  query {\n    queryTask {\n      id\n      title\n      completed\n    }\n  }\n"]))),Q=Object(E.a)(a||(a=Object(S.a)(["\n  mutation addTask($task: [AddTaskInput!]!) {\n    addTask(input: $task) {\n      task {\n        id\n        title\n      }\n    }\n  }\n"]))),A=Object(E.a)(o||(o=Object(S.a)(["\n  mutation updateTask($taskID: ID!, $completed: Boolean!) {\n    updateTask(input: {\n      filter: { id: [$taskID] },\n      set: {\n        completed: $completed\n      }\n    }) {\n      task {\n        id\n        title\n        completed\n      }\n    }\n  }\n"]))),B=Object(E.a)(l||(l=Object(S.a)(["\n  mutation updateTask($completed: Boolean!) {\n    updateTask(input: {\n      filter: {},\n      set: {\n        completed: $completed\n      }\n    }) {\n      task {\n        id\n        title\n        completed\n      }\n    }\n  }\n"]))),F=Object(E.a)(s||(s=Object(S.a)(["\n  mutation deleteTask($taskID: [ID!]) {\n    deleteTask(filter: { id: $taskID }) {\n      msg\n    }\n  }\n"]))),J=Object(E.a)(r||(r=Object(S.a)(["\n  mutation updateTask($taskID: ID!, $task: TaskPatch!) {\n    updateTask(input: {\n      filter: { id: [$taskID] },\n      set: $task\n    }) {\n      task {\n        id\n        title\n        completed\n      }\n    }\n  }\n"]))),K=Object(E.a)(i||(i=Object(S.a)(["\n  mutation deleteTask($completed: Boolean) {\n    deleteTask(filter: { completed: $completed }) {\n      msg\n    }\n  }\n"]))),P=function(){var e=Object(u.useState)(k),t=Object(f.a)(e,2),n=t[0],c=t[1],a=Object(u.useState)(null),o=Object(f.a)(a,2),l=o[0],s=o[1],r=Object(u.useState)(""),i=Object(f.a)(r,2),d=i[0],j=i[1],b=Object(u.useState)([]),h=Object(f.a)(b,2),p=h[0],v=h[1],y=Object(m.useMutation)(Q),C=Object(f.a)(y,1)[0],D=Object(m.useMutation)(A),T=Object(f.a)(D,1)[0],N=Object(m.useMutation)(B),w=Object(f.a)(N,1)[0],S=Object(m.useMutation)(F),E=Object(f.a)(S,1)[0],P=Object(m.useMutation)(J),R=Object(f.a)(P,1)[0],G=Object(m.useMutation)(K),H=Object(f.a)(G,1)[0],W=Object(m.useQuery)(M),_=W.loading,z=W.error,L=W.data;Object(u.useEffect)((function(){var e=function(e){return function(){return c(e)}},t={"/":e(k),"/active":e(x),"/completed":e(g)},n=function(e){e&&(e=e.substring(1)),(t[e]||t["/"])()};n(O.location.hash),O.listen((function(e,t){return n(e.hash)})),!_&&(z?(console.error("GET_TODOS error: ".concat(z)),"Error: ".concat(z.message)):L.queryTask&&v(L.queryTask))}),[L]);var U=function(e){return C({variables:{task:[{title:e,completed:!1,user:{username:"someone@emal.com"}}]},refetchQueries:[{query:M}]})},V=function(){return s(null)},X=p.filter((function(e){switch(n){case x:return!e.completed;case g:return e.completed;default:return!0}})).map((function(e){return Object($.jsx)(q,{todo:e,onToggle:function(){var t;T({variables:{taskID:(t=e).id,completed:!t.completed},refetchQueries:[{query:M}]})},onDestroy:function(){return function(e){return E({variables:{taskID:[e.id]},refetchQueries:[{query:M}]})}(e)},onEdit:function(){return function(e){return s(e.id)}(e)},editing:l===e.id,onSave:function(t){return function(e,t){R({variables:{taskID:e.id,task:{title:t}},refetchQueries:[{query:M}]}),s(null)}(e,t)},onCancel:V},e.id)})),Y=p.reduce((function(e,t){return t.completed?e:e+1}),0),Z=p.length-Y,ee=Y||Z?Object($.jsx)(I,{count:Y,completedCount:Z,nowShowing:n,onClearCompleted:function(){return H({variables:{completed:!0},refetchQueries:[{query:M}]})}}):null,te=p.length?Object($.jsxs)("section",{className:"main",children:[Object($.jsx)("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",onChange:function(e){var t=e.target.checked;w({variables:{completed:t},refetchQueries:[{query:M}]})},checked:0===Y}),Object($.jsx)("label",{htmlFor:"toggle-all"}),Object($.jsx)("ul",{className:"todo-list",children:X})]}):null;return Object($.jsxs)("div",{children:[Object($.jsx)("header",{className:"header",children:Object($.jsx)("input",{className:"new-todo",placeholder:"Enter your tasks?",value:d,onKeyDown:function(e){if(13===e.keyCode){e.preventDefault();d&&(U(d),j(""))}},onChange:function(e){j(e.target.value)},autoFocus:!0})}),te,ee]})},R=n(45),G=(n(83),function(){return Object($.jsx)("div",{className:"navbar",children:Object($.jsx)("ul",{children:Object($.jsx)("span",{children:Object($.jsx)("li",{children:Object($.jsx)(R.a,{to:"/",children:"Home"})})})})})}),H=(n(88),new m.ApolloClient({uri:"https://frosty-brook.ap-south-1.aws.cloud.dgraph.io/graphql",cache:new m.InMemoryCache})),W=function(){return Object($.jsx)(m.ApolloProvider,{client:H,children:Object($.jsx)("div",{children:Object($.jsxs)(p.b,{history:O,children:[Object($.jsx)("h1",{style:{color:"DarkCyan"},children:"What to do?"}),Object($.jsx)("header",{className:"navheader",children:Object($.jsx)(G,{})}),Object($.jsx)(p.c,{children:Object($.jsx)(p.a,{path:"/",component:P,exact:!0})})]})})})};b.a.render(Object($.jsx)(W,{}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.8f21cc90.chunk.js.map