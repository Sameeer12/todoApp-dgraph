{"ast":null,"code":"import _slicedToArray from\"/home/sgupta/projects/myTodoApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useQuery,useMutation,gql}from\"@apollo/client\";import defs from'./defs';import TodoFooter from'./TodoFooter';import TodoItem from'./TodoItem';import history from'./history';import{GET_TODOS,ADD_TODO,DELETE_TODO,TOGGLE_TODO,UPDATE_TODO,CLEAR_COMPLETED_TODO,TOGGLE_ALL_TODO}from\"./GraphQLData\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ENTER_KEY=13;var TodoApp=function TodoApp(){var _useState=useState(defs.ALL_TODOS),_useState2=_slicedToArray(_useState,2),nowShowing=_useState2[0],setNowShowing=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),getEditing=_useState4[0],setEditing=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newTodo=_useState6[0],setNewTodo=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),shownTodos=_useState8[0],setShownTodos=_useState8[1];var _useMutation=useMutation(ADD_TODO),_useMutation2=_slicedToArray(_useMutation,1),addTodo=_useMutation2[0];var _useMutation3=useMutation(TOGGLE_TODO),_useMutation4=_slicedToArray(_useMutation3,1),toggleTodo=_useMutation4[0];var _useMutation5=useMutation(TOGGLE_ALL_TODO),_useMutation6=_slicedToArray(_useMutation5,1),toggleAllTodo=_useMutation6[0];var _useMutation7=useMutation(DELETE_TODO),_useMutation8=_slicedToArray(_useMutation7,1),deleteTodo=_useMutation8[0];var _useMutation9=useMutation(UPDATE_TODO),_useMutation10=_slicedToArray(_useMutation9,1),updateTodo=_useMutation10[0];var _useMutation11=useMutation(CLEAR_COMPLETED_TODO),_useMutation12=_slicedToArray(_useMutation11,1),clearCompletedTodo=_useMutation12[0];var _useQuery=useQuery(GET_TODOS),loading=_useQuery.loading,error=_useQuery.error,data=_useQuery.data;var getData=function getData(){if(loading){return null;}if(error){console.error(\"GET_TODOS error: \".concat(error));return\"Error: \".concat(error.message);}if(data.queryTask){setShownTodos(data.queryTask);}};useEffect(function(){var setNowShowingFn=function setNowShowingFn(nowShowing){return function(){return setNowShowing(nowShowing);};};var routes={'/':setNowShowingFn(defs.ALL_TODOS),'/active':setNowShowingFn(defs.ACTIVE_TODOS),'/completed':setNowShowingFn(defs.COMPLETED_TODOS)};var processLocationHash=function processLocationHash(hash){if(hash){hash=hash.substring(1);}var route=routes[hash]||routes['/'];route();};processLocationHash(history.location.hash);history.listen(function(location,action){return processLocationHash(location.hash);});getData();},[data]);// eslint-disable-line react-hooks/exhaustive-deps\nvar handleChange=function handleChange(event){setNewTodo(event.target.value);};var handleNewTodoKeyDown=function handleNewTodoKeyDown(event){if(event.keyCode!==ENTER_KEY){return;}event.preventDefault();var val=newTodo;if(val){add(val);setNewTodo('');}};var add=function add(title){return addTodo({variables:{task:[{title:title,completed:false,user:{username:\"someone@emal.com\"}}]},refetchQueries:[{query:GET_TODOS}]});};var destroy=function destroy(todo){return deleteTodo({variables:{taskID:[todo.id]},refetchQueries:[{query:GET_TODOS}]});};var toggleAll=function toggleAll(event){var checked=event.target.checked;toggleAllTodo({variables:{completed:checked},refetchQueries:[{query:GET_TODOS}]});};var toggle=function toggle(todoToToggle){toggleTodo({variables:{taskID:todoToToggle.id,completed:!todoToToggle.completed},refetchQueries:[{query:GET_TODOS}]});};var edit=function edit(todo){return setEditing(todo.id);};var save=function save(todoToSave,text){updateTodo({variables:{taskID:todoToSave.id,task:{title:text}},refetchQueries:[{query:GET_TODOS}]});setEditing(null);};var cancel=function cancel(){return setEditing(null);};var clearCompleted=function clearCompleted(){return clearCompletedTodo({variables:{completed:true},refetchQueries:[{query:GET_TODOS}]});};var newTodos=shownTodos.filter(function(todo){switch(nowShowing){case defs.ACTIVE_TODOS:return!todo.completed;case defs.COMPLETED_TODOS:return todo.completed;default:return true;}});var todoItems=newTodos.map(function(todo){return/*#__PURE__*/_jsx(TodoItem,{todo:todo,onToggle:function onToggle(){return toggle(todo);},onDestroy:function onDestroy(){return destroy(todo);},onEdit:function onEdit(){return edit(todo);},editing:getEditing===todo.id,onSave:function onSave(text){return save(todo,text);},onCancel:cancel},todo.id);});var activeTodoCount=shownTodos.reduce(function(accum,todo){return todo.completed?accum:accum+1;},0);var completedCount=shownTodos.length-activeTodoCount;var footer=activeTodoCount||completedCount?/*#__PURE__*/_jsx(TodoFooter,{count:activeTodoCount,completedCount:completedCount,nowShowing:nowShowing,onClearCompleted:clearCompleted}):null;var main=!shownTodos.length?null:/*#__PURE__*/_jsxs(\"section\",{className:\"main\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"toggle-all\",className:\"toggle-all\",type:\"checkbox\",onChange:toggleAll,checked:activeTodoCount===0}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"toggle-all\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"todo-list\",children:todoItems})]});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsx(\"input\",{className:\"new-todo\",placeholder:\"Enter your tasks?\",value:newTodo,onKeyDown:handleNewTodoKeyDown,onChange:handleChange,autoFocus:true})}),main,footer]});};export default TodoApp;","map":{"version":3,"sources":["/home/sgupta/projects/myTodoApp/gitfiles/todoApp-dgraph/src/TodoApp.js"],"names":["React","useState","useEffect","useQuery","useMutation","gql","defs","TodoFooter","TodoItem","history","GET_TODOS","ADD_TODO","DELETE_TODO","TOGGLE_TODO","UPDATE_TODO","CLEAR_COMPLETED_TODO","TOGGLE_ALL_TODO","ENTER_KEY","TodoApp","ALL_TODOS","nowShowing","setNowShowing","getEditing","setEditing","newTodo","setNewTodo","shownTodos","setShownTodos","addTodo","toggleTodo","toggleAllTodo","deleteTodo","updateTodo","clearCompletedTodo","loading","error","data","getData","console","message","queryTask","setNowShowingFn","routes","ACTIVE_TODOS","COMPLETED_TODOS","processLocationHash","hash","substring","route","location","listen","action","handleChange","event","target","value","handleNewTodoKeyDown","keyCode","preventDefault","val","add","title","variables","task","completed","user","username","refetchQueries","query","destroy","todo","taskID","id","toggleAll","checked","toggle","todoToToggle","edit","save","todoToSave","text","cancel","clearCompleted","newTodos","filter","todoItems","map","activeTodoCount","reduce","accum","completedCount","length","footer","main"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useQuery, useMutation, gql } from \"@apollo/client\";\n\nimport defs from './defs'\nimport TodoFooter from './TodoFooter'\nimport TodoItem from './TodoItem'\nimport history from './history'\nimport { GET_TODOS, ADD_TODO, DELETE_TODO, TOGGLE_TODO, UPDATE_TODO, \n  CLEAR_COMPLETED_TODO, TOGGLE_ALL_TODO } from \"./GraphQLData\";\nconst ENTER_KEY = 13\n\n\nconst TodoApp = () => {\n  const [nowShowing, setNowShowing] = useState(defs.ALL_TODOS);\n  const [getEditing, setEditing] = useState(null);\n  const [newTodo, setNewTodo] = useState(\"\");\n  const [shownTodos, setShownTodos] = useState([]);\n\n  const [addTodo] = useMutation(ADD_TODO);\n  const [toggleTodo] = useMutation(TOGGLE_TODO);\n  const [toggleAllTodo] = useMutation(TOGGLE_ALL_TODO);\n  const [deleteTodo] = useMutation(DELETE_TODO);\n  const [updateTodo] = useMutation(UPDATE_TODO);\n  const [clearCompletedTodo] = useMutation(CLEAR_COMPLETED_TODO);\n\n  const { loading, error, data } = useQuery(GET_TODOS);\n  const getData = () => {\n    if (loading) {\n      return null;\n    }\n    if (error) {\n      console.error(`GET_TODOS error: ${error}`);\n      return `Error: ${error.message}`;\n    }\n    if (data.queryTask) {\n      setShownTodos(data.queryTask)\n    }\n  }\n\n  useEffect(() => {\n    const setNowShowingFn = nowShowing => () => setNowShowing(nowShowing)\n    const routes = {\n      '/': setNowShowingFn(defs.ALL_TODOS),\n      '/active': setNowShowingFn(defs.ACTIVE_TODOS),\n      '/completed': setNowShowingFn(defs.COMPLETED_TODOS),\n    }\n    const processLocationHash = hash => {\n      if (hash) {\n        hash = hash.substring(1)\n      }\n      const route = routes[hash] || routes['/']\n      route()\n    }\n    processLocationHash(history.location.hash)\n    history.listen((location, action) =>\n      processLocationHash(location.hash)\n    )\n    getData()\n  }, [data]) // eslint-disable-line react-hooks/exhaustive-deps\n\n  \n  const handleChange = event => {\n    setNewTodo(event.target.value)\n  }\n\n  const handleNewTodoKeyDown = event => {\n    if (event.keyCode !== ENTER_KEY) {\n      return\n    }\n    event.preventDefault()\n    const val = newTodo\n    if (val) {\n      add(val)\n      setNewTodo('')\n    }\n  }\n\n\n  const add = (title) =>\n  addTodo({\n    variables: { task: [\n      { title: title, completed: false, user: { username: \"someone@emal.com\" } }\n    ]},\n    refetchQueries: [{\n      query: GET_TODOS\n    }]\n  });\n  \n\n  const destroy = todo =>\n    deleteTodo({\n      variables: {\n        taskID: [todo.id]\n      },\n      refetchQueries: [{\n        query: GET_TODOS\n      }]\n    })\n\n    const toggleAll = event => {\n      const checked = event.target.checked\n      toggleAllTodo({\n        variables: {\n          completed: checked\n        },\n        refetchQueries: [{\n          query: GET_TODOS\n        }]\n      })\n    }\n\n    const toggle = todoToToggle => {\n      toggleTodo({\n        variables: {\n          taskID: todoToToggle.id,\n          completed: !todoToToggle.completed\n        },\n        refetchQueries: [{\n          query: GET_TODOS\n        }]\n      })\n    }\n\n    const edit = todo => setEditing(todo.id)\n\n    const save = (todoToSave, text) => {\n      updateTodo({\n        variables: {\n          taskID: todoToSave.id,\n          task: {\n            title: text\n          }\n        },\n        refetchQueries: [{\n          query: GET_TODOS\n        }]\n      })\n      setEditing(null)\n    }\n\n    const cancel = () =>\n    setEditing(null)\n\n  const clearCompleted = () =>\n    clearCompletedTodo({\n      variables: {\n        completed: true\n      },\n      refetchQueries: [{\n        query: GET_TODOS\n      }]\n    })\n\n    const newTodos = shownTodos.filter(todo => {\n      switch (nowShowing) {\n        case defs.ACTIVE_TODOS:\n          return !todo.completed\n        case defs.COMPLETED_TODOS:\n          return todo.completed\n        default:\n          return true\n      }\n    })\n\n    const todoItems = newTodos.map(todo => {\n      return (\n        <TodoItem\n          key={todo.id}\n          todo={todo}\n          onToggle={() => toggle(todo)}\n          onDestroy={() => destroy(todo)}\n          onEdit={() => edit(todo)}\n          editing={getEditing === todo.id}\n          onSave={text => save(todo, text)}\n          onCancel={cancel}\n        />\n      )\n    })\n\n  const activeTodoCount = shownTodos.reduce(function (accum, todo) {\n    return todo.completed ? accum : accum + 1\n  }, 0)\n\n  const completedCount = shownTodos.length - activeTodoCount\n\n  const footer = (activeTodoCount || completedCount)\n  ? <TodoFooter\n      count={activeTodoCount}\n      completedCount={completedCount}\n      nowShowing={nowShowing}\n      onClearCompleted={clearCompleted}\n    />\n  : null\n\n  const main = !shownTodos.length\n  ? null\n  : (\n    <section className=\"main\">\n      <input\n        id=\"toggle-all\"\n        className=\"toggle-all\"\n        type=\"checkbox\"\n        onChange={toggleAll}\n        checked={activeTodoCount === 0}\n      />\n      <label\n        htmlFor=\"toggle-all\"\n      />\n      <ul className=\"todo-list\">\n        {todoItems}\n      </ul>\n    </section>\n  )\n\n  return (\n    <div>\n      <header className=\"header\">\n        <input\n          className=\"new-todo\"\n          placeholder=\"Enter your tasks?\"\n          value={newTodo}\n          onKeyDown={handleNewTodoKeyDown}\n          onChange={handleChange}\n          autoFocus={true}\n        />\n      </header>\n      {main}\n      {footer}\n    </div>\n  )\n}\n\nexport default TodoApp"]},"metadata":{},"sourceType":"module"}